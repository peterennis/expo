{"version":3,"file":"StoreReview.js","sourceRoot":"","sources":["../src/StoreReview.ts"],"names":[],"mappings":"AAAA,OAAO,SAAS,MAAM,gBAAgB,CAAC;AACvC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,cAAc,CAAC;AAEjD,OAAO,WAAW,MAAM,mBAAmB,CAAC;AAE5C;;;;GAIG;AACH,MAAM,UAAU,WAAW;IACzB,OAAO,WAAW,IAAI,WAAW,CAAC,WAAW,CAAC;AAChD,CAAC;AAED;;GAEG;AACH,MAAM,CAAC,KAAK,UAAU,aAAa;IACjC,IAAI,WAAW,IAAI,WAAW,CAAC,aAAa,EAAE;QAC5C,MAAM,WAAW,CAAC,aAAa,EAAE,CAAC;KACnC;SAAM;QACL,0FAA0F;QAC1F,MAAM,GAAG,GAAG,QAAQ,EAAE,CAAC;QACvB,IAAI,GAAG,EAAE;YACP,MAAM,SAAS,GAAG,MAAM,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;YAChD,IAAI,CAAC,SAAS,EAAE;gBACd,OAAO,CAAC,IAAI,CAAC,0DAA0D,EAAE,GAAG,CAAC,CAAC;aAC/E;iBAAM;gBACL,MAAM,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;aAC5B;SACF;aAAM;YACL,iDAAiD;YACjD,OAAO,CAAC,IAAI,CACV,oKAAoK,CACrK,CAAC;SACH;KACF;AACH,CAAC;AAED;;;;GAIG;AACH,MAAM,UAAU,QAAQ;IACtB,MAAM,EAAE,QAAQ,EAAE,GAAG,SAAS,CAAC;IAC/B,IAAI,QAAQ,CAAC,EAAE,KAAK,KAAK,IAAI,QAAQ,CAAC,GAAG,EAAE;QACzC,OAAO,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC;KACjC;SAAM,IAAI,QAAQ,CAAC,EAAE,KAAK,SAAS,IAAI,QAAQ,CAAC,OAAO,EAAE;QACxD,OAAO,QAAQ,CAAC,OAAO,CAAC,YAAY,CAAC;KACtC;SAAM;QACL,OAAO,IAAI,CAAC;KACb;AACH,CAAC;AAED;;GAEG;AACH,MAAM,UAAU,SAAS;IACvB,OAAO,CAAC,CAAC,QAAQ,EAAE,IAAI,WAAW,EAAE,CAAC;AACvC,CAAC","sourcesContent":["import Constants from 'expo-constants';\nimport { Linking, Platform } from 'react-native';\n\nimport StoreReview from './ExpoStoreReview';\n\n/*\n * Platform must be iOS\n * iOS 10.3 or greater\n * `SKStoreReviewController` class is available\n */\nexport function isSupported(): boolean {\n  return StoreReview && StoreReview.isSupported;\n}\n\n/*\n * Use the iOS `SKStoreReviewController` API to prompt a user rating without leaving the app.\n */\nexport async function requestReview(): Promise<void> {\n  if (StoreReview && StoreReview.requestReview) {\n    await StoreReview.requestReview();\n  } else {\n    // If StoreReview is unavailable then get the store URL from `app.json` and open the store\n    const url = storeUrl();\n    if (url) {\n      const supported = await Linking.canOpenURL(url);\n      if (!supported) {\n        console.warn(\"Expo.StoreReview.requestReview(): Can't open store url: \", url);\n      } else {\n        await Linking.openURL(url);\n      }\n    } else {\n      // If the store URL is missing, let the dev know.\n      console.warn(\n        \"Expo.StoreReview.requestReview(): Couldn't link to store, please make sure the `android.playStoreUrl` & `ios.appStoreUrl` fields are filled out in your `app.json`\"\n      );\n    }\n  }\n}\n\n/*\n * Get your app's store URLs from the `app.json`\n * iOS: https://docs.expo.io/versions/latest/workflow/configuration#appstoreurlurl-to-your-app-on-the-apple-app-store-if-you-have-deployed-it-there-this-is-used-to-link-to-your-store-page-from-your-expo-project-page-if-your-app-is-public\n * Android: https://docs.expo.io/versions/latest/workflow/configuration#playstoreurlurl-to-your-app-on-the-google-play-store-if-you-have-deployed-it-there-this-is-used-to-link-to-your-store-page-from-your-expo-project-page-if-your-app-is-public\n */\nexport function storeUrl(): string | null {\n  const { manifest } = Constants;\n  if (Platform.OS === 'ios' && manifest.ios) {\n    return manifest.ios.appStoreUrl;\n  } else if (Platform.OS === 'android' && manifest.android) {\n    return manifest.android.playStoreUrl;\n  } else {\n    return null;\n  }\n}\n\n/*\n * A flag to detect if this module can do anything\n */\nexport function hasAction(): boolean {\n  return !!storeUrl() || isSupported();\n}\n"]}